{"ast":null,"code":"import { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/dumper.service\";\nimport * as i2 from \"@angular/common\";\n\nfunction DumperDetailsComponent_mat_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const v_r15 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", v_r15.deviceMappingID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", v_r15.deviceMappingID, \" \");\n  }\n}\n\nfunction DumperDetailsComponent_mat_header_cell_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 28);\n    i0.ɵɵtext(1, \" Dumper Id \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DumperDetailsComponent_mat_cell_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r16.dumperId, \" \");\n  }\n}\n\nfunction DumperDetailsComponent_mat_header_cell_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 28);\n    i0.ɵɵtext(1, \" Loading Point\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DumperDetailsComponent_mat_cell_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r17 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r17.loadDeviceValue, \" \");\n  }\n}\n\nfunction DumperDetailsComponent_mat_header_cell_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 28);\n    i0.ɵɵtext(1, \" Unloading Point \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DumperDetailsComponent_mat_cell_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r18 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r18.unloadDeviceValue, \" \");\n  }\n}\n\nfunction DumperDetailsComponent_mat_header_cell_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 28);\n    i0.ɵɵtext(1, \" Date \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DumperDetailsComponent_mat_cell_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, element_r19.date, \"dd-MM-YYYY\"), \" \");\n  }\n}\n\nfunction DumperDetailsComponent_mat_header_cell_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 28);\n    i0.ɵɵtext(1, \" Trip \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DumperDetailsComponent_mat_cell_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r20 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r20.status, \" \");\n  }\n}\n\nfunction DumperDetailsComponent_mat_header_row_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-header-row\");\n  }\n}\n\nfunction DumperDetailsComponent_mat_row_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-row\");\n  }\n}\n\nconst _c0 = function () {\n  return [5, 10, 20];\n};\n\nexport let DumperDetailsComponent = /*#__PURE__*/(() => {\n  class DumperDetailsComponent {\n    constructor(dumperService, datepipe) {\n      this.dumperService = dumperService;\n      this.datepipe = datepipe;\n      this.dumper = [];\n      this.dumperFilter = [];\n      this.dumperData = new MatTableDataSource(this.dumper);\n      this.displayedColumns = ['dumperId', 'loadDeviceValue', 'unloadDeviceValue', 'date', 'status'];\n      let today = new Date();\n      this.todaysDate = this.datepipe.transform(today, 'yyyy-MM-dd');\n      this.fromDate = this.todaysDate;\n      this.toDate = this.todaysDate;\n    }\n\n    ngOnInit() {\n      this.GetDumperIds();\n      this.GetData(this.fromDate, this.toDate);\n    }\n\n    ngAfterViewInit() {\n      this.dumperData.paginator = this.paginator;\n      this.dumperData.sort = this.sort;\n    }\n\n    applyFilter(filterValue) {\n      filterValue = filterValue.trim(); // Remove whitespace\n\n      filterValue = filterValue.toLowerCase(); // Datasource defaults to lowercase matches\n\n      this.dumperData.filter = filterValue;\n    }\n\n    setMinDate(setToDate = false) {\n      this.dMinDate = this.fromDate;\n      if (setToDate) this.toDate = this.fromDate;\n    }\n\n    GetData(fromDate, toDate) {\n      const newDumper = {\n        fromDate,\n        toDate\n      };\n      this.dumperService.getDumperDetails(newDumper).subscribe(dumperRecords => {\n        this.dumper = dumperRecords['data'];\n        this.filterDumperData(null);\n      });\n    }\n\n    GetDumperIds() {\n      this.dumperService.getDeviceIds().subscribe({\n        next: dumperids => {\n          this.dmp = dumperids['data'];\n          this.getDumpers = this.dmp;\n        },\n        error: err => this.errorMessage = err\n      });\n    }\n\n    filterDumpers() {\n      this.GetData(this.fromDate, this.toDate);\n    }\n\n    onDumperChange() {\n      if (this.selecte_dumperId.length > 0) {\n        this.filterDumperData(this.selecte_dumperId);\n      } else {\n        this.filterDumperData(null);\n      }\n    }\n\n    filterDumperData(recordFilter) {\n      if (recordFilter == null) {\n        this.dumperData.data = this.dumper;\n      } else {\n        let dumperFilterData = [];\n        this.dumper.forEach(dumperItem => {\n          if (recordFilter.indexOf(dumperItem.dumperId) >= 0) {\n            dumperFilterData.push(dumperItem);\n          }\n        });\n        this.dumperData.data = dumperFilterData;\n      }\n    }\n\n  }\n\n  DumperDetailsComponent.ɵfac = function DumperDetailsComponent_Factory(t) {\n    return new (t || DumperDetailsComponent)(i0.ɵɵdirectiveInject(i1.DumperService), i0.ɵɵdirectiveInject(i2.DatePipe));\n  };\n\n  DumperDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DumperDetailsComponent,\n    selectors: [[\"app-dumper-details\"]],\n    viewQuery: function DumperDetailsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      }\n    },\n    decls: 44,\n    vars: 12,\n    consts: [[1, \"mat-card-page\"], [1, \"mat-card-header-page\"], [1, \"mat-card-title-page\"], [1, \"mat-card-content-page\", \"p-2\"], [1, \"row\", \"m-0\", \"p-0\"], [\"appearance\", \"outline\", 1, \"col-4\"], [\"multiple\", \"\", 3, \"ngModel\", \"selectionChange\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"appearance\", \"outline\", 1, \"col-3\"], [\"matInput\", \"\", \"type\", \"date\", \"name\", \"fromDate\", 3, \"ngModel\", \"change\", \"ngModelChange\"], [\"matInput\", \"\", \"type\", \"date\", \"name\", \"toDate\", 3, \"ngModel\", \"min\", \"ngModelChange\"], [\"mat-raised-button\", \"\", 1, \"col-2\", \"btn-search\", 3, \"click\"], [1, \"row\"], [1, \"col-12\"], [\"matSort\", \"\", 3, \"dataSource\"], [\"table\", \"\"], [\"matColumnDef\", \"dumperId\"], [\"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [4, \"matCellDef\"], [\"matColumnDef\", \"loadDeviceValue\"], [\"matColumnDef\", \"unloadDeviceValue\"], [\"matColumnDef\", \"date\"], [\"matColumnDef\", \"status\"], [4, \"matHeaderRowDef\"], [4, \"matRowDef\", \"matRowDefColumns\"], [3, \"pageSize\", \"pageSizeOptions\", \"showFirstLastButtons\"], [\"paginator\", \"\"], [3, \"value\"], [\"mat-sort-header\", \"\"]],\n    template: function DumperDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-card\", 0);\n        i0.ɵɵelementStart(1, \"mat-card-header\", 1);\n        i0.ɵɵelementStart(2, \"mat-card-title\", 2);\n        i0.ɵɵelementStart(3, \"mat-icon\");\n        i0.ɵɵtext(4, \"data_usage\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(5, \" Dumper Count \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"mat-card-content\", 3);\n        i0.ɵɵelementStart(7, \"div\", 4);\n        i0.ɵɵelementStart(8, \"mat-form-field\", 5);\n        i0.ɵɵelementStart(9, \"mat-label\");\n        i0.ɵɵtext(10, \"Select Dumper Id\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"mat-select\", 6);\n        i0.ɵɵlistener(\"selectionChange\", function DumperDetailsComponent_Template_mat_select_selectionChange_11_listener() {\n          return ctx.onDumperChange();\n        })(\"ngModelChange\", function DumperDetailsComponent_Template_mat_select_ngModelChange_11_listener($event) {\n          return ctx.selecte_dumperId = $event;\n        });\n        i0.ɵɵtemplate(12, DumperDetailsComponent_mat_option_12_Template, 2, 2, \"mat-option\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"mat-form-field\", 8);\n        i0.ɵɵelementStart(14, \"input\", 9);\n        i0.ɵɵlistener(\"change\", function DumperDetailsComponent_Template_input_change_14_listener() {\n          return ctx.setMinDate(true);\n        })(\"ngModelChange\", function DumperDetailsComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.fromDate = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"mat-form-field\", 8);\n        i0.ɵɵelementStart(16, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function DumperDetailsComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.toDate = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function DumperDetailsComponent_Template_button_click_17_listener() {\n          return ctx.filterDumpers();\n        });\n        i0.ɵɵelementStart(18, \"mat-icon\");\n        i0.ɵɵtext(19, \"search\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 12);\n        i0.ɵɵelementStart(21, \"div\", 13);\n        i0.ɵɵelementStart(22, \"mat-table\", 14, 15);\n        i0.ɵɵelementContainerStart(24, 16);\n        i0.ɵɵtemplate(25, DumperDetailsComponent_mat_header_cell_25_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(26, DumperDetailsComponent_mat_cell_26_Template, 2, 1, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(27, 19);\n        i0.ɵɵtemplate(28, DumperDetailsComponent_mat_header_cell_28_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(29, DumperDetailsComponent_mat_cell_29_Template, 2, 1, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(30, 20);\n        i0.ɵɵtemplate(31, DumperDetailsComponent_mat_header_cell_31_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(32, DumperDetailsComponent_mat_cell_32_Template, 2, 1, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(33, 21);\n        i0.ɵɵtemplate(34, DumperDetailsComponent_mat_header_cell_34_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(35, DumperDetailsComponent_mat_cell_35_Template, 3, 4, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(36, 22);\n        i0.ɵɵtemplate(37, DumperDetailsComponent_mat_header_cell_37_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(38, DumperDetailsComponent_mat_cell_38_Template, 2, 1, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(39, DumperDetailsComponent_mat_header_row_39_Template, 1, 0, \"mat-header-row\", 23);\n        i0.ɵɵtemplate(40, DumperDetailsComponent_mat_row_40_Template, 1, 0, \"mat-row\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"mat-paginator\", 25, 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"mat-card-footer\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngModel\", ctx.selecte_dumperId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.getDumpers);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.fromDate);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.toDate)(\"min\", ctx.dMinDate);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"dataSource\", ctx.dumperData);\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"pageSize\", 10)(\"pageSizeOptions\", i0.ɵɵpureFunction0(11, _c0))(\"showFirstLastButtons\", true);\n      }\n    },\n    styles: [\"\"]\n  });\n  return DumperDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}