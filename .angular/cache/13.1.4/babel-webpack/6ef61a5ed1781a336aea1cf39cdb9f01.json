{"ast":null,"code":"import { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/dumper.service\";\nimport * as i2 from \"@angular/common\";\n\nfunction TripDurationComponent_mat_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const v_r19 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", v_r19.deviceMappingID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", v_r19.deviceMappingID, \" \");\n  }\n}\n\nfunction TripDurationComponent_mat_header_cell_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 30);\n    i0.ɵɵtext(1, \" Dumper Id\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TripDurationComponent_mat_cell_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r20 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r20.dumperId, \" \");\n  }\n}\n\nfunction TripDurationComponent_mat_header_cell_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 30);\n    i0.ɵɵtext(1, \" Loading Point \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TripDurationComponent_mat_cell_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r21.loadDeviceValue, \" \");\n  }\n}\n\nfunction TripDurationComponent_mat_header_cell_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 30);\n    i0.ɵɵtext(1, \" Unloading \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TripDurationComponent_mat_cell_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r22 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r22.unloadDeviceValue, \" \");\n  }\n}\n\nfunction TripDurationComponent_mat_header_cell_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 30);\n    i0.ɵɵtext(1, \" Trip Date \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TripDurationComponent_mat_cell_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r23 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, element_r23.date, \"dd-MM-YYYY\"), \" \");\n  }\n}\n\nfunction TripDurationComponent_mat_header_cell_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 30);\n    i0.ɵɵtext(1, \" Load Time \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TripDurationComponent_mat_cell_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r24 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(2, 1, element_r24.loadStartTime, \"dd-MM-YYYY HH:mm\", \"UTC\"), \" \");\n  }\n}\n\nfunction TripDurationComponent_mat_header_cell_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 30);\n    i0.ɵɵtext(1, \" Unload Time \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TripDurationComponent_mat_cell_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r25 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(2, 1, element_r25.unloadEndTime, \"dd-MM-YYYY HH:mm\", \"UTC\"), \" \");\n  }\n}\n\nfunction TripDurationComponent_mat_header_cell_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 30);\n    i0.ɵɵtext(1, \" Trip Duration \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TripDurationComponent_mat_cell_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"slice\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r26 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(2, 1, element_r26.timeDiff, 0, 5), \" \");\n  }\n}\n\nfunction TripDurationComponent_mat_header_row_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-header-row\");\n  }\n}\n\nfunction TripDurationComponent_mat_row_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-row\");\n  }\n}\n\nconst _c0 = function () {\n  return [5, 10, 20];\n};\n\nexport let TripDurationComponent = /*#__PURE__*/(() => {\n  class TripDurationComponent {\n    constructor(dumperService, datepipe) {\n      this.dumperService = dumperService;\n      this.datepipe = datepipe;\n      this.dumper = [];\n      this.displayedColumns = ['dumperId', 'loadDeviceValue', 'unloadDeviceValue', 'date', 'loadStartTime', 'unloadEndTime', 'timeDiff'];\n      this.dumperData = new MatTableDataSource(this.dumper);\n      let today = new Date();\n      this.todaysDate = this.datepipe.transform(today, 'yyyy-MM-dd');\n      this.fromDate = this.todaysDate;\n      this.toDate = this.todaysDate;\n    }\n\n    ngOnInit() {\n      this.getDeviceIds();\n      this.getData(this.fromDate, this.toDate);\n    }\n\n    ngAfterViewInit() {\n      this.dumperData.paginator = this.paginator;\n      this.dumperData.sort = this.sort;\n    }\n\n    applyFilter(filterValue) {\n      filterValue = filterValue.trim(); // Remove whitespace\n\n      filterValue = filterValue.toLowerCase(); // Datasource defaults to lowercase matches\n\n      this.dumperData.filter = filterValue;\n    }\n\n    setMinDate(setToDate = false) {\n      this.dMinDate = this.fromDate;\n      if (setToDate) this.toDate = this.fromDate;\n    }\n\n    getData(fromDate, toDate) {\n      const newDumper = {\n        fromDate,\n        toDate\n      };\n      this.dumperService.getTripDuration(newDumper).subscribe(dumperRecords => {\n        this.dumper = dumperRecords['data'];\n        console.log(this.dumper);\n        this.filterDumperData(null);\n      });\n    }\n\n    getDeviceIds() {\n      const newdumper = {\n        deviceCatagory: 'Dumper'\n      };\n      this.dumperService.getDeviceIds().subscribe({\n        next: dumperids => {\n          this.dmp = dumperids['data'];\n          this.getDumpers = this.dmp;\n        },\n        error: err => this.errorMessage = err\n      });\n    }\n\n    onDumperChange() {\n      if (this.selecte_dumperId.length > 0) {\n        this.filterDumperData(this.selecte_dumperId);\n      } else {\n        this.filterDumperData(null);\n      }\n    }\n\n    filterDumpers() {\n      this.getData(this.fromDate, this.toDate);\n    }\n\n    filterDumperData(recordFilter) {\n      if (recordFilter == null) {\n        this.dumperData.data = this.dumper;\n      } else {\n        let dumperFilterData = [];\n        this.dumper.forEach(dumperItem => {\n          if (recordFilter.indexOf(dumperItem.dumperId) >= 0) {\n            dumperFilterData.push(dumperItem);\n          }\n        });\n        this.dumperData.data = dumperFilterData;\n      }\n    }\n\n  }\n\n  TripDurationComponent.ɵfac = function TripDurationComponent_Factory(t) {\n    return new (t || TripDurationComponent)(i0.ɵɵdirectiveInject(i1.DumperService), i0.ɵɵdirectiveInject(i2.DatePipe));\n  };\n\n  TripDurationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TripDurationComponent,\n    selectors: [[\"app-trip-duration\"]],\n    viewQuery: function TripDurationComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      }\n    },\n    decls: 50,\n    vars: 12,\n    consts: [[1, \"mat-card-page\"], [1, \"mat-card-header-page\"], [1, \"mat-card-title-page\"], [1, \"mat-card-content-page\", \"p-2\"], [1, \"row\", \"m-0\", \"p-0\"], [\"appearance\", \"outline\", 1, \"col-4\"], [\"multiple\", \"\", 3, \"ngModel\", \"selectionChange\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"appearance\", \"outline\", 1, \"col-3\"], [\"matInput\", \"\", \"type\", \"date\", \"name\", \"fromDate\", 3, \"ngModel\", \"change\", \"ngModelChange\"], [\"matInput\", \"\", \"type\", \"date\", \"name\", \"toDate\", 3, \"ngModel\", \"min\", \"ngModelChange\"], [\"mat-raised-button\", \"\", 1, \"col-2\", \"btn-search\", 3, \"click\"], [1, \"row\"], [1, \"col-12\"], [\"matSort\", \"\", 3, \"dataSource\"], [\"table\", \"\"], [\"matColumnDef\", \"dumperId\"], [\"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [4, \"matCellDef\"], [\"matColumnDef\", \"loadDeviceValue\"], [\"matColumnDef\", \"unloadDeviceValue\"], [\"matColumnDef\", \"date\"], [\"matColumnDef\", \"loadStartTime\"], [\"matColumnDef\", \"unloadEndTime\"], [\"matColumnDef\", \"timeDiff\"], [4, \"matHeaderRowDef\"], [4, \"matRowDef\", \"matRowDefColumns\"], [3, \"pageSize\", \"pageSizeOptions\", \"showFirstLastButtons\"], [\"paginator\", \"\"], [3, \"value\"], [\"mat-sort-header\", \"\"]],\n    template: function TripDurationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-card\", 0);\n        i0.ɵɵelementStart(1, \"mat-card-header\", 1);\n        i0.ɵɵelementStart(2, \"mat-card-title\", 2);\n        i0.ɵɵelementStart(3, \"mat-icon\");\n        i0.ɵɵtext(4, \"access_time\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(5, \" Duration of the trip \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"mat-card-content\", 3);\n        i0.ɵɵelementStart(7, \"div\", 4);\n        i0.ɵɵelementStart(8, \"mat-form-field\", 5);\n        i0.ɵɵelementStart(9, \"mat-label\");\n        i0.ɵɵtext(10, \"Select Dumper Id\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"mat-select\", 6);\n        i0.ɵɵlistener(\"selectionChange\", function TripDurationComponent_Template_mat_select_selectionChange_11_listener() {\n          return ctx.onDumperChange();\n        })(\"ngModelChange\", function TripDurationComponent_Template_mat_select_ngModelChange_11_listener($event) {\n          return ctx.selecte_dumperId = $event;\n        });\n        i0.ɵɵtemplate(12, TripDurationComponent_mat_option_12_Template, 2, 2, \"mat-option\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"mat-form-field\", 8);\n        i0.ɵɵelementStart(14, \"input\", 9);\n        i0.ɵɵlistener(\"change\", function TripDurationComponent_Template_input_change_14_listener() {\n          return ctx.setMinDate(true);\n        })(\"ngModelChange\", function TripDurationComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.fromDate = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"mat-form-field\", 8);\n        i0.ɵɵelementStart(16, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function TripDurationComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.toDate = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function TripDurationComponent_Template_button_click_17_listener() {\n          return ctx.filterDumpers();\n        });\n        i0.ɵɵelementStart(18, \"mat-icon\");\n        i0.ɵɵtext(19, \"search\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 12);\n        i0.ɵɵelementStart(21, \"div\", 13);\n        i0.ɵɵelementStart(22, \"mat-table\", 14, 15);\n        i0.ɵɵelementContainerStart(24, 16);\n        i0.ɵɵtemplate(25, TripDurationComponent_mat_header_cell_25_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(26, TripDurationComponent_mat_cell_26_Template, 2, 1, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(27, 19);\n        i0.ɵɵtemplate(28, TripDurationComponent_mat_header_cell_28_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(29, TripDurationComponent_mat_cell_29_Template, 2, 1, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(30, 20);\n        i0.ɵɵtemplate(31, TripDurationComponent_mat_header_cell_31_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(32, TripDurationComponent_mat_cell_32_Template, 2, 1, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(33, 21);\n        i0.ɵɵtemplate(34, TripDurationComponent_mat_header_cell_34_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(35, TripDurationComponent_mat_cell_35_Template, 3, 4, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(36, 22);\n        i0.ɵɵtemplate(37, TripDurationComponent_mat_header_cell_37_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(38, TripDurationComponent_mat_cell_38_Template, 3, 5, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(39, 23);\n        i0.ɵɵtemplate(40, TripDurationComponent_mat_header_cell_40_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(41, TripDurationComponent_mat_cell_41_Template, 3, 5, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(42, 24);\n        i0.ɵɵtemplate(43, TripDurationComponent_mat_header_cell_43_Template, 2, 0, \"mat-header-cell\", 17);\n        i0.ɵɵtemplate(44, TripDurationComponent_mat_cell_44_Template, 3, 5, \"mat-cell\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(45, TripDurationComponent_mat_header_row_45_Template, 1, 0, \"mat-header-row\", 25);\n        i0.ɵɵtemplate(46, TripDurationComponent_mat_row_46_Template, 1, 0, \"mat-row\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(47, \"mat-paginator\", 27, 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(49, \"mat-card-footer\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngModel\", ctx.selecte_dumperId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.getDumpers);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.fromDate);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.toDate)(\"min\", ctx.dMinDate);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"dataSource\", ctx.dumperData);\n        i0.ɵɵadvance(23);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"pageSize\", 10)(\"pageSizeOptions\", i0.ɵɵpureFunction0(11, _c0))(\"showFirstLastButtons\", true);\n      }\n    },\n    styles: [\"\"]\n  });\n  return TripDurationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}